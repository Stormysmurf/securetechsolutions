<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lottie Test</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: #1a1a2e;
            font-family: Arial, sans-serif;
            color: white;
        }

        .test-container {
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        h1 {
            color: #ff2de3;
            margin-bottom: 30px;
        }

        /* Test Card 1: Full Size Animation */
        .test-card-1 {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #ff2de3;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
        }

        #lottie-test-1 {
            width: 300px;
            height: 300px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
        }

        /* Test Card 2: Background Animation (like your biometric card) */
        .test-card-2 {
            position: relative;
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #8b2cff;
            border-radius: 16px;
            padding: 40px;
            min-height: 300px;
            overflow: hidden;
            isolation: isolate;
        }

        #lottie-test-2 {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.15;
            pointer-events: none;
            z-index: 1;
        }

        .test-card-2 .content {
            position: relative;
            z-index: 2;
        }

        .test-card-2 h2 {
            font-size: 32px;
            margin-bottom: 15px;
            color: white;
        }

        .test-card-2 p {
            font-size: 18px;
            color: rgba(255, 255, 255, 0.8);
            line-height: 1.6;
        }

        .test-card-2 .icon {
            font-size: 64px;
            margin-bottom: 20px;
        }

        /* Status Messages */
        .status {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            font-weight: bold;
        }

        .status.loading {
            background: rgba(255, 200, 0, 0.2);
            border: 1px solid #ffc800;
            color: #ffc800;
        }

        .status.success {
            background: rgba(0, 255, 100, 0.2);
            border: 1px solid #00ff64;
            color: #00ff64;
        }

        .status.error {
            background: rgba(255, 0, 50, 0.2);
            border: 1px solid #ff0032;
            color: #ff0032;
        }

        .console-log {
            background: #0a0a0a;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 20px;
            margin-top: 30px;
            text-align: left;
            max-height: 300px;
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 14px;
        }

        .console-log div {
            margin: 5px 0;
            padding: 5px;
            border-left: 3px solid #666;
            padding-left: 10px;
        }

        .console-log .log-error {
            border-left-color: #ff0032;
            color: #ff6b8a;
        }

        .console-log .log-success {
            border-left-color: #00ff64;
            color: #5fffb8;
        }

        .console-log .log-info {
            border-left-color: #00b8ff;
            color: #7dd3ff;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üî¨ Lottie Animation Test</h1>

        <!-- Test 1: Full Size Animation -->
        <div class="test-card-1">
            <h2>Test 1: Full Size Animation</h2>
            <p>Animation should appear in the box below:</p>
            <div id="lottie-test-1"></div>
            <div id="status-1" class="status loading">‚è≥ Loading...</div>
        </div>

        <!-- Test 2: Background Animation -->
        <div class="test-card-2">
            <div id="lottie-test-2"></div>
            <div class="content">
                <div class="icon">üîê</div>
                <h2>Test 2: Background Animation</h2>
                <p>Animation should play as subtle background behind this text. This is how it looks on your biometric card.</p>
            </div>
        </div>
        <div id="status-2" class="status loading">‚è≥ Loading background animation...</div>

        <!-- Console Log Output -->
        <div class="console-log" id="console-output">
            <strong>üìã Console Log:</strong>
        </div>
    </div>

    <!-- Bodymovin/Lottie Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bodymovin/5.12.2/lottie.min.js" 
            integrity="sha512-jEnuDt6jfecCjthQAJ+ed0MTVA++5ZKmlUcmDGBv2vUI/REn6FuIdixLNnQT+vKusE2hhTk2is3cFvv5wA+Sgg==" 
            crossorigin="anonymous" 
            referrerpolicy="no-referrer"></script>

    <script>
        // Custom console logging to display on page
        const consoleOutput = document.getElementById('console-output');
        
        function addLog(message, type = 'info') {
            const logDiv = document.createElement('div');
            logDiv.className = `log-${type}`;
            const timestamp = new Date().toLocaleTimeString();
            logDiv.textContent = `[${timestamp}] ${message}`;
            consoleOutput.appendChild(logDiv);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
            console.log(message);
        }

        // Check if lottie loaded
        if (typeof lottie === 'undefined') {
            addLog('‚ùå ERROR: Lottie library not loaded!', 'error');
            document.getElementById('status-1').className = 'status error';
            document.getElementById('status-1').textContent = '‚ùå Lottie library failed to load';
            document.getElementById('status-2').className = 'status error';
            document.getElementById('status-2').textContent = '‚ùå Lottie library failed to load';
        } else {
            addLog('‚úÖ Lottie library loaded successfully', 'success');

            // TEST 1: Full Size Animation
            const container1 = document.getElementById('lottie-test-1');
            const status1 = document.getElementById('status-1');

            addLog('üîÑ Attempting to load face.json for Test 1...', 'info');

            fetch('assets/face.json')
                .then(response => {
                    addLog(`üì° Response status: ${response.status}`, 'info');
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: File not found`);
                    }
                    return response.json();
                })
                .then(animationData => {
                    addLog('‚úÖ face.json loaded successfully', 'success');
                    addLog(`üìä Animation data: ${Object.keys(animationData).length} properties found`, 'info');
                    
                    const anim1 = lottie.loadAnimation({
                        container: container1,
                        renderer: 'svg',
                        loop: true,
                        autoplay: true,
                        animationData: animationData
                    });

                    anim1.addEventListener('DOMLoaded', () => {
                        addLog('‚úÖ TEST 1 PASSED: Animation rendered!', 'success');
                        status1.className = 'status success';
                        status1.textContent = '‚úÖ Animation loaded successfully!';
                    });

                    anim1.addEventListener('data_failed', () => {
                        addLog('‚ùå TEST 1 FAILED: Animation data failed', 'error');
                        status1.className = 'status error';
                        status1.textContent = '‚ùå Animation data invalid';
                    });
                })
                .catch(error => {
                    addLog(`‚ùå TEST 1 FAILED: ${error.message}`, 'error');
                    status1.className = 'status error';
                    status1.textContent = `‚ùå ${error.message}`;
                });

            // TEST 2: Background Animation
            const container2 = document.getElementById('lottie-test-2');
            const status2 = document.getElementById('status-2');

            addLog('üîÑ Attempting to load face.json for Test 2...', 'info');

            fetch('assets/face.json')
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}: File not found`);
                    }
                    return response.json();
                })
                .then(animationData => {
                    const anim2 = lottie.loadAnimation({
                        container: container2,
                        renderer: 'svg',
                        loop: true,
                        autoplay: true,
                        animationData: animationData
                    });

                    anim2.addEventListener('DOMLoaded', () => {
                        addLog('‚úÖ TEST 2 PASSED: Background animation rendered!', 'success');
                        status2.className = 'status success';
                        status2.textContent = '‚úÖ Background animation working!';
                    });

                    anim2.addEventListener('data_failed', () => {
                        addLog('‚ùå TEST 2 FAILED: Background animation data failed', 'error');
                        status2.className = 'status error';
                        status2.textContent = '‚ùå Background animation data invalid';
                    });
                })
                .catch(error => {
                    addLog(`‚ùå TEST 2 FAILED: ${error.message}`, 'error');
                    status2.className = 'status error';
                    status2.textContent = `‚ùå ${error.message}`;
                });
        }
    </script>
</body>
</html>